<!DOCTYPE html>
<html lang="en" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TechScan Lookup</title>
  <style>
    :root {
      --bg: #0f1115;
      --panel: #1b1f27;
      --panel-alt: #222834;
      --border: #2e3644;
      --accent: #3b82f6;
      --accent-hover: #2563eb;
      --text: #f1f5f9;
      --text-dim: #94a3b8;
      --danger: #ef4444;
      --warn: #f59e0b;
      --ok: #10b981;
      --radius: 10px;
      --focus-ring: 0 0 0 3px rgba(59, 130, 246, .35)
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, sans-serif;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
    }

    h1 {
      font-size: 2.2rem;
      margin: 0 0 1rem;
      font-weight: 600;
    }

    a {
      color: var(--accent);
      text-decoration: none
    }

    a:hover {
      color: var(--accent-hover)
    }

    header {
      padding: 2.5rem 2rem 1.2rem;
      max-width: 1040px;
      margin: 0 auto;
    }

    .subtitle {
      color: var(--text-dim);
      font-size: .95rem;
      max-width: 760px;
      line-height: 1.4
    }

    main {
      max-width: 1040px;
      margin: 0 auto;
      padding: 0 2rem 4rem;
    }

    .panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1.15rem 1.15rem 1.25rem;
      margin-bottom: 1.2rem;
      box-shadow: 0 4px 12px -4px rgba(0, 0, 0, .35)
    }

    .panel h2 {
      font-size: 1.02rem;
      margin: 0 0 .75rem;
      font-weight: 600;
      letter-spacing: .5px;
      text-transform: uppercase;
      color: var(--text-dim)
    }

    form.inline {
      display: flex;
      gap: .6rem;
      flex-wrap: wrap;
      align-items: flex-start
    }

    input[type=text] {
      flex: 1 1 360px;
      background: var(--panel-alt);
      border: 1px solid var(--border);
      color: var(--text);
      padding: .85rem 1rem;
      border-radius: 8px;
      font-size: .95rem;
      outline: none;
    }

    input[type=text]:focus {
      border-color: var(--accent);
      box-shadow: var(--focus-ring);
    }

    button {
      cursor: pointer;
      background: var(--accent);
      color: var(--text);
      border: none;
      padding: .75rem 1.05rem;
      font-size: .9rem;
      border-radius: 8px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: .45rem;
      letter-spacing: .3px;
    }

    button:hover {
      background: var(--accent-hover)
    }

    button.secondary {
      background: var(--panel-alt);
      border: 1px solid var(--border);
      color: var(--text-dim);
    }

    button.secondary:hover {
      border-color: var(--accent);
      color: var(--text)
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(230px, 1fr));
      gap: .75rem;
      margin-top: 1.1rem
    }

    .tech {
      background: var(--panel-alt);
      border: 1px solid var(--border);
      padding: .9rem .95rem .95rem;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      gap: .55rem;
      min-height: 150px
    }

    .tech h3 {
      margin: 0;
      font-size: .92rem;
      font-weight: 600;
      line-height: 1.25
    }

    .tech .version {
      font-size: .72rem;
      color: var(--accent);
      font-weight: 500
    }

    .tech-icon,
    .tech-logo {
      width: 34px;
      height: 34px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: .72rem;
      font-weight: 600;
      letter-spacing: .5px;
      background: #334155;
      color: #fff
    }

    .tech-logo {
      overflow: hidden;
      background: #1e2530
    }

    .tech-logo img {
      max-width: 100%;
      max-height: 100%;
      display: block
    }

    .tech-head {
      display: flex;
      align-items: flex-start;
      gap: .7rem
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: .3rem
    }

    .badge {
      background: #2f3a4a;
      color: var(--text-dim);
      padding: .25rem .55rem;
      border-radius: 999px;
      font-size: .65rem;
      letter-spacing: .5px;
      text-transform: uppercase
    }

    .status-bar {
      font-size: .7rem;
      position: absolute;
      top: 6px;
      right: 8px;
      color: var(--text-dim)
    }

    pre {
      background: #0d0f12;
      border: 1px solid var(--border);
      padding: 1rem;
      border-radius: 8px;
      overflow: auto;
      font-size: .75rem;
      line-height: 1.3;
      max-height: 340px
    }

    .flex-row {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap
    }

    .col {
      flex: 1 1 380px;
      min-width: 320px
    }

    .hidden {
      display: none
    }

    .error {
      color: var(--danger);
      margin-top: .5rem;
      font-size: .8rem
    }

    .table-wrap {
      overflow: auto;
      max-height: 420px
    }

    table {
      border-collapse: collapse;
      width: 100%;
      font-size: .8rem
    }

    th,
    td {
      padding: .45rem .55rem;
      text-align: left;
      border-bottom: 1px solid var(--border)
    }

    th {
      background: var(--panel-alt);
      position: sticky;
      top: 0
    }

    .categories-list {
      display: flex;
      flex-direction: column;
      gap: .65rem;
      margin-top: .9rem
    }

    .cat-block {
      background: var(--panel-alt);
      border: 1px solid var(--border);
      padding: .7rem .85rem;
      border-radius: 8px
    }

    .cat-block h4 {
      margin: 0 0 .5rem;
      font-size: .75rem;
      letter-spacing: .5px;
      color: var(--text-dim);
      text-transform: uppercase
    }

    footer {
      max-width: 1040px;
      margin: 2rem auto 4rem;
      padding: 0 2rem;
      font-size: .65rem;
      color: var(--text-dim);
      text-align: center
    }

    input[type=file] {
      display: none
    }

    .file-label {
      background: var(--panel-alt);
      border: 1px dashed var(--border);
      padding: 1rem;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      font-size: .8rem;
      color: var(--text-dim)
    }

    .spinner {
      width: 18px;
      height: 18px;
      border: 3px solid #1f2933;
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite
    }

    @keyframes spin {
      to {
        transform: rotate(360deg)
      }
    }

    .new-domain {
      background: rgba(16, 185, 129, 0.08)
    }

    .new-domain td {
      position: relative
    }

    .new-chip {
      background: var(--ok);
      color: #fff;
      padding: 0 .4rem;
      border-radius: 999px;
      font-size: .55rem;
      letter-spacing: .5px;
      margin-left: .35rem
    }

    @media (max-width:680px) {
      header {
        padding: 2rem 1.2rem 1rem
      }

      main {
        padding: 0 1.2rem 3rem
      }
    }
  </style>
</head>

<body>
  <header>
    <!-- Legacy index.html intentionally blank after migration to multi-page UI.
    Keperluan: beberapa browser mungkin masih meminta /index.html secara langsung.
    Tindakan: redirect ditangani di route Flask (/index.html -> /dashboard). File kosong ini mencegah fallback ke UI lama.
    -->
    <tbody></tbody>
    </table>
    <div style="display:flex;gap:.6rem;margin-top:.6rem;align-items:center;font-size:.7rem;flex-wrap:wrap">
      <button type="button" id="history-prev" class="secondary" style="padding:.4rem .7rem">Prev</button>
      <button type="button" id="history-next" class="secondary" style="padding:.4rem .7rem">Next</button>
      <label style="display:flex;align-items:center;gap:.25rem">Page <input type="number" id="history-page-jump" min="1"
          value="1"
          style="width:65px;background:var(--panel-alt);border:1px solid var(--border);color:var(--text);padding:.3rem .4rem;border-radius:6px;font-size:.65rem" /></label>
      <button type="button" id="history-go" class="secondary" style="padding:.35rem .6rem">Go</button>
      <span id="history-page-info" style="color:var(--text-dim)"></span>
    </div>
    </div>
    </section>
    <section class="panel" id="search-panel">
      <h2>Search Technology</h2>
      <form class="inline" id="search-form">
        <input type="text" id="search-tech" placeholder="Nama teknologi (misal: Laravel)" required />
        <input type="text" id="search-version" placeholder="Versi (opsional)"
          style="flex:0 0 140px;background:var(--panel-alt);border:1px solid var(--border);color:var(--text);padding:.85rem .8rem;border-radius:8px;font-size:.75rem" />
        <input type="text" id="search-category" placeholder="Kategori (opsional)"
          style="flex:0 0 150px;background:var(--panel-alt);border:1px solid var(--border);color:var(--text);padding:.85rem .8rem;border-radius:8px;font-size:.75rem" />
        <label style="display:flex;align-items:center;gap:.35rem;font-size:.65rem;color:var(--text-dim)"><input
            type="checkbox" id="search-new24" style="accent-color:var(--accent)" /> NEW 24h</label>
        <input type="number" id="search-limit" placeholder="Limit" min="1" value="50"
          style="flex:0 0 80px;background:var(--panel-alt);border:1px solid var(--border);color:var(--text);padding:.85rem .8rem;border-radius:8px;font-size:.75rem" />
        <button type="submit">Search</button>
      </form>
      <div id="search-error" class="error hidden" style="margin-top:.5rem"></div>
      <div class="table-wrap hidden" id="search-table-wrap" style="margin-top:.8rem">
        <table id="search-table">
          <thead>
            <tr>
              <th>Domain</th>
              <th>Tech</th>
              <th>Version</th>
              <th>Categories</th>
              <th>First Seen</th>
              <th>Last Seen</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <div style="display:flex;gap:.6rem;margin-top:.6rem;align-items:center;font-size:.7rem;flex-wrap:wrap">
          <button type="button" id="search-prev" class="secondary" style="padding:.4rem .7rem">Prev</button>
          <button type="button" id="search-next" class="secondary" style="padding:.4rem .7rem">Next</button>
          <label style="display:flex;align-items:center;gap:.25rem">Page <input type="number" id="search-page-jump"
              min="1" value="1"
              style="width:65px;background:var(--panel-alt);border:1px solid var(--border);color:var(--text);padding:.3rem .4rem;border-radius:6px;font-size:.65rem" /></label>
          <button type="button" id="search-go" class="secondary" style="padding:.35rem .6rem">Go</button>
          <span id="search-page-info" style="color:var(--text-dim)"></span>
        </div>
      </div>
    </section>
    <section class="panel" id="domain-panel">
      <h2>Cari Domain (Current Tech)</h2>
      <form class="inline" id="domain-form">
        <input type="text" id="lookup-domain" placeholder="Domain untuk lookup" required />
        <button type="submit">Lookup</button>
      </form>
      <div id="domain-error" class="error hidden" style="margin-top:.5rem"></div>
      <div id="domain-result" class="hidden" style="margin-top:.9rem">
        <h3 style="margin:0 0 .6rem;font-size:.85rem" id="domain-res-title"></h3>
        <div class="results-grid" id="domain-tech-grid"></div>
        <details style="margin-top:1rem">
          <summary style="cursor:pointer;color:var(--text-dim);font-size:.7rem">Categories</summary>
          <div id="domain-cat" class="categories-list" style="margin-top:.6rem"></div>
        </details>
      </div>
    </section>
    <section class="panel" id="diff-panel">
      <h2>Diff Last 2 Scans</h2>
      <p style="margin:.2rem 0 .8rem;font-size:.65rem;color:var(--text-dim)">Menunjukkan perbedaan teknologi antara dua
        scan terakhir untuk domain: teknologi baru (Added), hilang (Removed), dan berubah versi (Changed). Berguna
        memantau update atau perubahan stack.</p>
      <form class="inline" id="diff-form">
        <input type="text" id="diff-domain" placeholder="Domain untuk diff" required />
        <button type="submit">Load Diff</button>
      </form>
      <div id="diff-error" class="error hidden" style="margin-top:.5rem"></div>
      <div id="diff-result" class="hidden"
        style="margin-top:.8rem;font-size:.75rem;display:flex;flex-direction:column;gap:.9rem">
        <div id="diff-meta" style="color:var(--text-dim)"></div>
        <div style="display:flex;flex-wrap:wrap;gap:1.2rem">
          <div style="flex:1 1 260px;min-width:220px">
            <h3 style="margin:.2rem 0 .4rem;font-size:.8rem;color:var(--text-dim);text-transform:uppercase">Added</h3>
            <ul id="diff-added" style="margin:0;padding-left:1.1rem"></ul>
          </div>
          <div style="flex:1 1 260px;min-width:220px">
            <h3 style="margin:.2rem 0 .4rem;font-size:.8rem;color:var(--text-dim);text-transform:uppercase">Removed</h3>
            <ul id="diff-removed" style="margin:0;padding-left:1.1rem"></ul>
          </div>
          <div style="flex:1 1 260px;min-width:220px">
            <h3 style="margin:.2rem 0 .4rem;font-size:.8rem;color:var(--text-dim);text-transform:uppercase">Changed</h3>
            <ul id="diff-changed" style="margin:0;padding-left:1.1rem"></ul>
          </div>
        </div>
      </div>
    </section>
    </main>
    <footer>
      Built with Flask + Wappalyzer (local). Detection accuracy depends on exposed artefacts. Cache TTL 5m.
    </footer>
<script src="{{ url_for('static', filename='js/home.js') }}"></script>
</body>

</html>