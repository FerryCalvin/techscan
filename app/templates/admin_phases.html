{% extends 'base.html' %}
{% block content %}
<section class="container">
  <h2>Recent Phase Timings</h2>
  <p>Shows latest scans (from cache store) with per-phase breakdown for quick diagnosis.</p>
  <div class="glass-card" style="overflow:auto; max-height: 65vh;">
    <table class="table-glass">
      <thead>
        <tr>
          <th>Domain</th>
          <th>Engine</th>
          <th>Duration (s)</th>
          <th>Techs</th>
          <th>Phases (ms)</th>
          <th>When</th>
        </tr>
      </thead>
      <tbody>
        {% for r in items %}
        <tr>
          <td>{{ r.domain }}</td>
          <td>{{ r.engine }}</td>
          <td>{{ '%.2f' % (r.duration or 0) }}</td>
          <td>{{ r.tech_count }}</td>
          <td>
            {% for k,v in r.phases.items() %}
              <span class="badge">{{ k }}: {{ v }}</span>
            {% endfor %}
          </td>
          <td>{{ r.ts | int }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <h3>Average Per-Phase (ms)</h3>
  <div class="glass-card">
    {% for k,v in summary.items() %}
      <span class="badge">{{ k }}: {{ v }}</span>
    {% endfor %}
  </div>
</section>
{% endblock %}
